
  <view class="body">
    <view  wx:if="{{step === 1}}" class="step-one step">
      <view class="title">
        <view class="main-title">MiSSiON</view>
        <view class="subtitle">请选择你的花名</view>
      </view>
      <view class="content">
        <block class="user-list" wx:for="{{userList}}" wx:for-index="index" wx:for-item="item" wx:key="key">
          <button class="user-item" hover-class="hover" bindtap="chooseUser" data-wepy-params-a="{{item}}">
            {{item.name}}
          </button>
        </block>
      </view>
    </view>
    <view  wx:if="{{step === 2}}" class="step-two step">
      <view class="main">
        <view class="left">
          <view class="name-wrap" bindtap="backToOne">{{user.name}}</view>
          <view class="back-one" bindtap="showRankList">排行榜</view>
        </view>
        <view class="right">
          <scroll-view class="task-list" scroll-y>
            <view class="item-list-wrap">
              <block wx:for="{{taskList}}" wx:for-index="index" wx:for-item="item" wx:key="key">
                <view class="task-wrap" bindtap="showTaskContent" data-wepy-params-a="{{item}}">
                  <view class="task-title">TASK-{{index+1}}：{{item.title}}</view>
                  <view class="task-content">
                    <view class="tc-item-wrap">
                      <view class="tc-item">难度</view>
                      <view class="tc-item">评级</view>
                      <view class="tc-item">连击</view>
                    </view>
                    <view class="tc-item-wrap">
                      <view class="tc-item">{{item.rank}}</view>
                      <view class="tc-item">{{item.score}}</view>
                      <view class="tc-item">{{item.combo}}</view>
                    </view>
                    <view class="tc-final">{{item.finalScore}}</view>
                  </view>
                </view>
              </block>
            </view>
          </scroll-view>  
          <button class="add-task" hover-class="hover" bindtap="addTask">+</button>
        </view>  
      </view>
      <view wx:if="{{showPop == true}}" class="pop">
        <view class="bg" bindtap="closePop"/>
        <view wx:if="{{showContent !== false }}">
          <view class="task-show-content">{{showContent}}</view>
        </view>
        <view wx:else class="pop-content">
          <view class="pop-title">任务卡</view>
          <input class="task-title" placeholder="任务名" maxlength="{{10}}" bindinput="bindTaskTitle"/>
          <textarea class="task-content" placeholder="任务描述" bindinput="bindTaskContent"/>
          <view class="rank-wrap">
            <view>难度:</view>
            <view class="center">
              <block wx:for="{{4}}" wx:for-index="index" wx:for-item="item" wx:key="key">
                <view bindtap="chooseRank" data-wepy-params-a="{{item}}">
                  <view wx:if="{{item <= rank-1}}" class="icon choosed"></view>
                  <view wx:else class="icon"></view>
                </view>
              </block>
            </view>
          </view>
          <view class="rank-wrap">
            <view>评级:</view>
            <view class="center">
              <block wx:for="{{5}}" wx:for-index="index" wx:for-item="item" wx:key="key">
                <view bindtap="chooseScore" data-wepy-params-a="{{item}}">
                  <view wx:if="{{item <= score-1}}" class="icon choosed"></view>
                  <view wx:else class="icon"></view>
                </view>
              </block>
            </view>
          </view>
          <view class="rank-wrap">
            <view>连击:</view>
            <view class="center">
              <view bindtap="toggleCombo">
                <view wx:if="{{combo == 2}}" class="icon choosed"></view>
                <view wx:else class="icon"></view>
              </view>
            </view>
          </view>
          <view class="rank-wrap">
            <view>得分:</view>
            <view class="final-score">{{finalScore}}</view>
          </view>
          <button class="confirm-task" bindtap="confirm" hover-class="hover">确认</button>
        </view>
      </view>
    </view>
  </view>